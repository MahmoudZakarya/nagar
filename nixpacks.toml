[phases.setup]
# Changed 'make' to 'gnumake' and 'gcc' to 'gcc-unwrapped' for better compatibility
nixPkgs = ["nodejs-20_x", "python3", "gcc-unwrapped", "gnumake", "pkg-config"]

[phases.build]
# We explicitly skip 'electron-builder' here to avoid the errors you saw earlier
cmds = [
  "npm install", 
  "vite build", 
  "tsc -p tsconfig.server.json"
]

[start]
cmd = "node dist-server/index.js"